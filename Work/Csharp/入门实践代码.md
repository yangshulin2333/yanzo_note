```CSharp
using System;

namespace 入门实践
{
    internal class Program
    {
        static void Main(string[] args)
        {
            #region 1、控制台基础设置
            //隐藏光标
            Console.CursorVisible = false;
            //设置控制台大小、缓存区大小
            int width = 60;
            int height = 40;
            Console.SetWindowSize(width, height);
            Console.SetBufferSize(width, height);
            #endregion
            //声明一个全局变量，用于存储游戏结束信息
            string gameOverInfo = " ";

            #region 2、多个场景
            //当前场景编号
            int nowSceneID = 1;
            while (true) {
                
                switch (nowSceneID) 
                {
                    case 1:
                        Console.Clear();
                        #region 开始场景逻辑
                        Console.SetCursorPosition(width/2 - 7, 8);
                        Console.Write("欢迎来到游戏！");
                        String beginGame = "按 W 键开始游戏";
                        String getOutGame = "按 S 键退出游戏";
                        int nowSelect = 1; //1表示开始游戏，2表示退出游戏
                        //专门处理开始界面的逻辑
                        while (true)
                        {
                            //用于玩家在switch内跳出while循环
                            bool isQuitWhile = false;
                            Console.SetCursorPosition(width / 2 - 7, 12);
                            Console.ForegroundColor = nowSelect == 1 ? Console.ForegroundColor = ConsoleColor.Red : Console.ForegroundColor = ConsoleColor.White;
                            Console.Write(beginGame);
                            Console.SetCursorPosition(width / 2 - 7, 14);
                            Console.ForegroundColor = nowSelect == 2 ? Console.ForegroundColor = ConsoleColor.Red : Console.ForegroundColor = ConsoleColor.White;
                            Console.Write(getOutGame);
                            //检测玩家输入
                            char input = Console.ReadKey(true).KeyChar;
                            switch (input)
                            {
                                case 'w':
                                case 'W':
                                    //nowSelect = 1;
                                    --nowSelect;
                                    if (nowSelect < 1)
                                    {
                                        nowSelect = 1;
                                    }
                                    break;
                                case 's':
                                case 'S':
                                    //nowSelect = 2;
                                    ++nowSelect;
                                    if (nowSelect > 2)
                                    {
                                        nowSelect = 2;
                                    }
                                    break;
                                case 'j':
                                case 'J':
                                    if (nowSelect == 1)
                                    {
                                        //切换到游戏场景
                                        nowSceneID = 2;
                                        isQuitWhile = true;
                                        
                                    }
                                    else {
                                        Environment.Exit(0);
                                    
                                    }
                                        break;
                                    
                            }
                            if (isQuitWhile) {
                                break;
                            }
                        }
                        #endregion
                        break;
                    
                    //游戏场景
                    case 2:
                        Console.Clear();
                        #region 4 游戏场景逻辑-红墙
                        //红墙场景
                        Console.ForegroundColor = ConsoleColor.Red;
                        //上方墙
                        for (int i = 0; i <= width - 1; i+=2)
                        {
                            Console.SetCursorPosition(i, 0);
                            Console.Write("■");
                            //中间墙
                            Console.SetCursorPosition(i, height - 6);
                            Console.Write("■");
                            //下方墙
                            Console.SetCursorPosition(i, height - 1);
                            Console.Write("■");

                        }
                        for (int i = 0; i <= height - 1; i ++)
                        {
                            //左侧墙
                            Console.SetCursorPosition(0, i);
                            Console.Write("■");
                            //y侧墙
                            Console.SetCursorPosition(width - 2, i);
                            Console.Write("■");
                        }
                        #endregion

                        #region 5 boss属性
                        int bossX = 24;
                        int bossY = 15;
                        int bossAtkMin = 7;
                        int bossAtkMax = 13;
                        int bossHp = 100;
                        string bossIcon = "★";
                        ConsoleColor bossColor = ConsoleColor.Blue;
                        #endregion

                        #region 6 玩家属性
                        int playerX = 4;
                        int playerY = 5;
                        int playerAtkMin = 8;
                        int playerAtkMax = 12;
                        int playerHp = 100;
                        string playerIcon = "●";
                        ConsoleColor playerColor = ConsoleColor.Yellow;
                        char playerInput;

                        #region 8 公主相关
                        int princessX = 24;
                        int princessY = 5;
                        string princessIcon = "▲";
                        ConsoleColor princessColor = ConsoleColor.Magenta;
                        #endregion

                        #endregion

                        #region 7 玩家战斗状态
                        bool isInBattle = false;
                        //作用是从while循环内的switch状态中跳出循环
                        bool isGameOver = false;
                        #endregion
                        //游戏场景的死循环 专门用来 检测 玩家输入相关循环
                        while (true)
                        {
                            if (bossHp > 0)
                            {
                                #region 绘制图标存活boss
                                Console.SetCursorPosition(bossX, bossY);
                                Console.ForegroundColor = bossColor;
                                Console.Write(bossIcon);
                                #endregion
                            }
                            else
                            {
                                #region 8 公主相关
                                Console.SetCursorPosition(princessX, princessY);
                                Console.ForegroundColor = princessColor;
                                Console.Write(princessIcon);
                                #endregion

                            }
                            #region 6.1 玩家移动相关
                            //画出玩家
                            Console.SetCursorPosition(playerX, playerY);
                            Console.ForegroundColor = playerColor;
                            Console.Write(playerIcon);
                            #endregion
                            //玩家输入
                            playerInput = Console.ReadKey(true).KeyChar;
                            //战斗状态处理
                            if (isInBattle)
                            {
                                if (playerInput == 'J' || playerInput == 'j')
                                {
                                    //先判断玩家或怪物是否死亡
                                    if (playerHp <= 0)
                                    {
                                        //玩家战败
                                        nowSceneID = 3;
                                        gameOverInfo = "营救失败";
                                        break;

                                    }
                                    else if (bossHp <= 0)
                                    {
                                        //boss战败
                                        //boss擦除
                                        Console.SetCursorPosition(bossX, bossY);
                                        Console.Write(" ");
                                        isInBattle = false;
                                        gameOverInfo = "英雄救美";
                                    }
                                    else
                                    {
                                        //都没死就是战斗中
                                        Random r = new Random();
                                        //玩家攻击
                                        int playerAtk = r.Next(playerAtkMin, playerAtkMax);
                                        bossHp -= playerAtk;
                                        //擦除该行旧信息
                                        Console.SetCursorPosition(2, height - 3);
                                        Console.Write(new string(' ', width - 4));//new string(' ', count): 创建一个由 count 个相同字符组成的字符串
                                        Console.SetCursorPosition(2, height - 3);
                                        Console.Write($"你对Boss造成了{playerAtk}点伤害！Boss血量为{bossHp} ");
                                        if (bossHp > 0)
                                        {
                                            //boss反击，受到人物攻击
                                            playerAtk = r.Next(bossAtkMin, bossAtkMax);
                                            playerHp -= playerAtk;

                                            if (playerHp <= 0)
                                            {
                                                //玩家死亡，游戏结束
                                                Console.SetCursorPosition(2, height - 3);
                                                Console.Write(new string(' ', width - 4));

                                                Console.SetCursorPosition(2, height - 4);
                                                Console.Write(new string(' ', width - 4));

                                                Console.SetCursorPosition(2, height - 5);
                                                Console.Write(new string(' ', width - 4));
                                                //修复位置
                                                Console.SetCursorPosition(2, height - 5);
                                                Console.Write("你被Boss击败，游戏结束！");

                                            }
                                            else
                                            {
                                                //擦除该行旧信息
                                                Console.SetCursorPosition(2, height - 4);
                                                Console.Write(new string(' ', width - 4));
                                                Console.SetCursorPosition(2, height - 4);
                                                Console.ForegroundColor = ConsoleColor.White;
                                                Console.Write($"Boss对你造成了{playerAtk}点伤害！玩家血量为{playerHp} ");
                                            }
                                        }
                                        else
                                        {
                                            //boss死亡，擦除信息
                                            Console.SetCursorPosition(2, height - 3);
                                            Console.Write(new string(' ', width - 4));
                                            Console.SetCursorPosition(2, height - 4);
                                            Console.Write(new string(' ', width - 4));
                                            Console.SetCursorPosition(2, height - 5);
                                            Console.Write(new string(' ', width - 4));

                                            Console.SetCursorPosition(2, height - 5);
                                            Console.Write("你击败了Boss！");

                                        }
                                    }

                                    
                                }
                            }
                            // 非战斗状态处理
                            else
                            {
                                // 先清除玩家的旧位置
                                Console.SetCursorPosition(playerX, playerY);
                                Console.Write(" ");
                                #region 玩家移动
                                // 根据输入更新玩家位置
                                switch (playerInput)
                                {
                                    case 'w':
                                    case 'W':
                                        --playerY;
                                        if (playerY < 1)
                                        {
                                            playerY = 1;
                                        }
                                        //判断boss和princess位置存在时不能与玩家重合
                                        else if (playerX == bossX && playerY == bossY && bossHp > 0 || playerX == princessX && playerY == princessY && bossHp <= 0)
                                        {
                                            ++playerY;
                                        }
                                        break;

                                    case 'a':
                                    case 'A':
                                        playerX -= 2;
                                        if (playerX < 2)
                                        {
                                            playerX = 2;
                                        }
                                        else if (playerX == bossX && playerY == bossY && bossHp > 0 || playerX == princessX && playerY == princessY && bossHp <= 0)
                                        {
                                            playerX += 2;
                                        }
                                        break;
                                    case 's':
                                    case 'S':
                                        ++playerY;
                                        if (playerY > height - 7)
                                        {
                                            playerY = height - 7;
                                        }
                                        else if (playerX == bossX && playerY == bossY && bossHp > 0 || playerX == princessX && playerY == princessY && bossHp <= 0)
                                        {
                                            --playerY;
                                        }
                                        break;
                                    case 'd':
                                    case 'D':
                                        playerX += 2;
                                        if (playerX > width - 4)
                                        {
                                            playerX = width - 4;
                                        }
                                        else if (playerX == bossX && playerY == bossY && bossHp > 0 || playerX == princessX && playerY == princessY && bossHp <= 0)
                                        {
                                            playerX -= 2;
                                        }
                                        break;
                                    case 'j':
                                    case 'J':
                                        //开始战斗
                                        if (playerX == bossX && playerY == bossY - 1 && bossHp > 0 || playerX == bossX && playerY == bossY + 1 && bossHp > 0 || playerX == bossX - 2 && playerY == bossY && bossHp > 0 || playerX == bossX + 2 && playerY == bossY && bossHp > 0)
                                        {
                                            isInBattle = true;
                                            Console.SetCursorPosition(2, height - 5);
                                            Console.Write("战斗开始，嗯J继续");
                                            Console.SetCursorPosition(2, height - 4);
                                            Console.Write($"玩家当前血量为{playerHp}");
                                            Console.SetCursorPosition(2, height - 3);
                                            Console.Write($"Boss血量为{bossHp}");
                                        }
                                        //判断是否在公主旁边
                                        else if(playerX == princessX && playerY == princessY - 1 && bossHp <= 0 || playerX == princessX && playerY == princessY + 1 && bossHp <= 0 || playerX == princessX - 2 && playerY == princessY && bossHp <= 0 || playerX == princessX + 2 && playerY == princessY && bossHp <= 0)
                                        {
                                            nowSceneID = 3;
                                            isGameOver = true;
                                            break;
                                        }
                                            //战斗后玩家不可移动，下方显示战斗信息
                                            break;
                                    
                                }
                                #endregion
                            }
                            //while循环逻辑
                            if (isGameOver)
                            {
                                break;
                            }
                            }
                        break;
                    //结束场景
                    case 3:
                        Console.Clear();
                        Console.SetCursorPosition(width/2 - 4,5);
                        Console.ForegroundColor = ConsoleColor.White;
                        Console.Write("GameOver");
                        //根据失败或成功返回对应内容
                        Console.SetCursorPosition(width / 2 - 4, 6);
                        Console.ForegroundColor = ConsoleColor.White;
                        Console.Write(gameOverInfo);
                        int nowSelEndIndex = 0;
                        while (true) {
                            bool isQuitWhile = false;
                            Console.SetCursorPosition(width / 2 - 6, 9);
                            Console.ForegroundColor =  nowSelEndIndex == 0 ? ConsoleColor.Red : ConsoleColor.White;
                            Console.Write("回到开始界面");

                            Console.SetCursorPosition(width / 2 - 4, 11);
                            Console.ForegroundColor = nowSelEndIndex == 1 ? ConsoleColor.Red : ConsoleColor.White;
                            Console.Write("退出游戏");
                            //检测玩家输入
                            char input = Console.ReadKey(true).KeyChar;
                            switch (input)
                            {
                                case 'w':
                                case 'W':
                                    --nowSelEndIndex;
                                    if (nowSelEndIndex <0)
                                    {
                                        nowSelEndIndex = 0;
                                    }

                            break;
                                case 's':
                                case 'S':
                                    ++nowSelEndIndex;
                                    if (nowSelEndIndex > 0)
                                    {
                                        nowSelEndIndex = 1;
                                    }
                                    break;
                                case 'j':
                                case 'J':
                                    if (nowSelEndIndex == 0) { 
                                        nowSceneID = 1;
                                        isQuitWhile = true;
                                    }
                                    else
                                    {
                                        Environment.Exit(0);
                                    }
                                    break;
                            }

                            if (isQuitWhile) {
                                break;
                            }



                        }

                        break;



                }
                
            }
            

            #endregion

        }
    }
}
```
